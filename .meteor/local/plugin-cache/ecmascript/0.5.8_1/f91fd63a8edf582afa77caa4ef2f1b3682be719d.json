{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"./main.html","imported":[],"specifiers":[]},{"source":"meteor/accounts-base","imported":["Accounts"],"specifiers":[{"kind":"named","imported":"Accounts","local":"Accounts"}]},{"source":"meteor/templating","imported":["Template"],"specifiers":[{"kind":"named","imported":"Template","local":"Template"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/main.js","filenameRelative":"/client/main.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/main.js.map","sourceFileName":"/client/main.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"main"},"ignored":false,"code":"module.import('./main.html');var Accounts;module.import('meteor/accounts-base',{\"Accounts\":function(v){Accounts=v}});var Template;module.import('meteor/templating',{\"Template\":function(v){Template=v}});\n\n\n\nLists = new Meteor.Collection('lists');\nTodos = new Mongo.Collection('todos');\nMarkers = new Mongo.Collection('markers');\n\nAccounts.ui.config({\n\n    passwordSignupFields: 'USERNAME_ONLY'\n\n});\n\n//Accounts.ui.config({\n\n//passwordSignupFields: 'USERNAME_ONLY',\n\n//});\n\nRouter.configure({\n    layoutTemplate: 'main'\n});\n\nRouter.route('/register');\nRouter.route('/login');\nRouter.route('/', {\n    name: 'home',\n    template: 'home'\n});\nRouter.route('/list/:_id', {\n    name: 'listPage',\n    template: 'listPage',\n    data: function () {\n        function data() {\n            var currentList = this.params._id;\n            return Lists.findOne({ _id: currentList });\n        }\n\n        return data;\n    }()\n});\nTemplate.map.onCreated(function () {\n    GoogleMaps.ready('map', function (map) {\n        google.maps.event.addListener(map.instance, 'click', function (event) {\n            Markers.insert({ lat: event.latLng.lat(), lng: event.latLng.lng() });\n        });\n\n        var markers = {};\n\n        Markers.find().observe({\n            added: function () {\n                function added(document) {\n                    var marker = new google.maps.Marker({\n                        draggable: true,\n                        animation: google.maps.Animation.DROP,\n                        position: new google.maps.LatLng(document.lat, document.lng),\n                        map: map.instance,\n                        id: document._id\n                    });\n                    marker.addListener('click', function (oldDocument) {\n                        markers[document._id] = marker;\n                        marker.setMap(null);\n                        google.maps.event.clearInstanceListeners(markes[oldDocument._id]);\n                        delete markers[oldDocument._id];\n                    });\n                    google.maps.event.addListener(marker, 'dragend', function (event) {\n                        Markers.update(marker.id, { $set: { lat: event.latLng.lat(), lng: event.latLng.lng() } });\n                    });\n\n                    markers[document._id] = marker;\n                }\n\n                return added;\n            }(),\n            changed: function () {\n                function changed(newDocument, oldDocument) {\n                    markers[newDocument._id].setPosition({ lat: newDocument.lat, lng: newDocument.lng });\n                }\n\n                return changed;\n            }(),\n            removed: function () {\n                function removed(oldDocument) {\n                    markers[oldDocument._id].setMap(null);\n                    google.maps.event.clearInstanceListeners(markers[oldDocument._id]);\n                    delete markers[oldDocument._id];\n                    //Markers.remove({_id: oldDocument._id});\n                }\n\n                return removed;\n            }()\n        });\n    });\n});\n\nMeteor.startup(function () {\n    GoogleMaps.load();\n});\n\nTemplate.map.helpers({\n    mapOptions: function () {\n        function mapOptions() {\n            if (GoogleMaps.loaded()) {\n                return {\n                    center: new google.maps.LatLng(50.2880701, 18.6778916),\n                    zoom: 15\n                };\n            }\n        }\n\n        return mapOptions;\n    }()\n});\nTemplate.addList.events({\n    'submit form': function () {\n        function submitForm(event) {\n            event.preventDefault();\n            var listName = $('[name=listName]').val();\n            Lists.insert({\n                name: listName\n            });\n            $('[name=listName]').val('');\n        }\n\n        return submitForm;\n    }()\n});\n\nTemplate.lists.helpers({\n    'list': function () {\n        function list() {\n            return Lists.find({}, { sort: { name: 1 } });\n        }\n\n        return list;\n    }()\n});\n\nTemplate.todos.helpers({\n    'todo': function () {\n        function todo() {\n            var currentList = this._id;\n            return Todos.find({ listId: currentList }, { sort: { createdAt: -1 } });\n        }\n\n        return todo;\n    }()\n});\n\nTemplate.addTodo.events({\n    'submit form': function () {\n        function submitForm(event) {\n            event.preventDefault();\n            var todoName = $('[name=\"todoName\"]').val();\n            var currentList = this._id;\n            Todos.insert({\n                name: todoName,\n                completed: false,\n                createdAt: new Date(),\n                listId: currentList\n            });\n            $('[name=\"todoName\"]').val('');\n        }\n\n        return submitForm;\n    }()\n});\nTemplate.removemarker.events({\n    'click .remove-markers': function () {\n        function clickRemoveMarkers(event) {\n            event.preventDefault();\n            var confirm = window.confirm(\"Delete this task?\");\n            if (confirm) {\n\n                Markers.remove({ _id: this });\n            }\n        }\n\n        return clickRemoveMarkers;\n    }()\n});\nTemplate.todoItem.events({\n    'click .delete-todo': function () {\n        function clickDeleteTodo(event) {\n            event.preventDefault();\n            var documentId = this._id;\n            var confirm = window.confirm(\"Delete this task?\");\n            if (confirm) {\n                Todos.remove({ _id: documentId });\n            }\n        }\n\n        return clickDeleteTodo;\n    }(),\n    'keyup [name=todoItem]': function () {\n        function keyupNameTodoItem(event) {\n            if (event.which == 13 || event.which == 27) {\n                $(event.target).blur();\n            } else {\n                var documentId = this._id;\n                var todoItem = $(event.target).val();\n                Todos.update({ _id: documentId }, { $set: { name: todoItem } });\n            }\n        }\n\n        return keyupNameTodoItem;\n    }(),\n    'change [type=checkbox]': function () {\n        function changeTypeCheckbox() {\n            var documentId = this._id;\n            var isCompleted = this.completed;\n            if (isCompleted) {\n                Todos.update({ _id: documentId }, { $set: { completed: false } });\n                console.log(\"Task marked as incomplete.\");\n            } else {\n                Todos.update({ _id: documentId }, { $set: { completed: true } });\n                console.log(\"Task marked as complete.\");\n            }\n        }\n\n        return changeTypeCheckbox;\n    }()\n\n});\n\nTemplate.todoItem.helpers({\n    'checked': function () {\n        function checked() {\n            var isCompleted = this.completed;\n            if (isCompleted) {\n                return \"checked\";\n            } else {\n                return \"\";\n            }\n        }\n\n        return checked;\n    }()\n});\n\nTemplate.todosCount.helpers({\n    'totalTodos': function () {\n        function totalTodos() {\n            var currentList = this._id;\n            return Todos.find({ listId: currentList }).count();\n        }\n\n        return totalTodos;\n    }(),\n    'completedTodos': function () {\n        function completedTodos() {\n            var currentList = this._id;\n            return Todos.find({ listId: currentList, completed: true }).count();\n        }\n\n        return completedTodos;\n    }()\n});\n\nTemplate.login.events({\n    'submit form': function () {\n        function submitForm(event) {\n            event.preventDefault();\n            var username = $('[name=username]').val();\n            var password = $('[name=password]').val();\n            Meteor.loginWithPassword(username, password, function (error) {\n                if (error) {\n                    console.log(error.reason);\n                } else {\n                    Router.go(\"home\");\n                }\n            });\n        }\n\n        return submitForm;\n    }()\n});\n\nTemplate.register.events({\n    'submit form': function () {\n        function submitForm(event) {\n            event.preventDefault();\n            var username = $('[name=username]').val();\n            var password = $('[name=password]').val();\n            Accounts.createUser({\n                username: username,\n                password: password\n            }, function (error) {\n                if (error) {\n                    console.log(error.reason);\n                } else {\n                    Router.go(\"home\");\n                }\n            });\n        }\n\n        return submitForm;\n    }()\n});\n\nTemplate.navigation.events({\n    'click .logout': function () {\n        function clickLogout(event) {\n            event.preventDefault();\n            Meteor.logout();\n            Router.go('login');\n        }\n\n        return clickLogout;\n    }()\n\n});","ast":null,"map":{"version":3,"sources":["/client/main.js"],"names":[],"mappings":"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","file":"/client/main.js.map","sourcesContent":["import './main.html';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Template } from 'meteor/templating';\n\nLists = new Meteor.Collection('lists');\nTodos = new Mongo.Collection('todos');\nMarkers = new Mongo.Collection('markers');\n\nAccounts.ui.config({\n\n  passwordSignupFields: 'USERNAME_ONLY',\n\n});\n\n\n\n//Accounts.ui.config({\n\n  //passwordSignupFields: 'USERNAME_ONLY',\n\n//});\n\n\nRouter.configure({\n    layoutTemplate: 'main'\n});\n\nRouter.route('/register');\nRouter.route('/login');\nRouter.route('/',{\n\t name: 'home',\n\t template: 'home'\n});\nRouter.route('/list/:_id', {\n\tname: 'listPage',\n\ttemplate: 'listPage',\n    data: function(){\n        var currentList = this.params._id;\n        return Lists.findOne({ _id: currentList });\n    },\n});\nTemplate.map.onCreated(function() {\n    GoogleMaps.ready('map', function(map) {\n      google.maps.event.addListener(map.instance, 'click', function(event) {\n        Markers.insert({ lat: event.latLng.lat(), lng: event.latLng.lng() });\n      });\n\n      var markers = {};\n\n      Markers.find().observe({\n        added: function (document) {\n          var marker = new google.maps.Marker({\n            draggable: true,\n            animation: google.maps.Animation.DROP,\n            position: new google.maps.LatLng(document.lat, document.lng),\n            map: map.instance,\n            id: document._id\n          });\n          marker.addListener('click', function(oldDocument) {\n            markers[document._id] = marker;\n            marker.setMap(null);\n            google.maps.event.clearInstanceListeners(markes[oldDocument._id]);\n            delete markers[oldDocument._id];\n          });\n          google.maps.event.addListener(marker, 'dragend', function(event) {\n            Markers.update(marker.id, { $set: { lat: event.latLng.lat(), lng: event.latLng.lng() }});\n          });\n\n          markers[document._id] = marker;\n        },\n        changed: function (newDocument, oldDocument) {\n          markers[newDocument._id].setPosition({ lat: newDocument.lat, lng: newDocument.lng });\n        },\n        removed: function (oldDocument) {\n          markers[oldDocument._id].setMap(null);\n          google.maps.event.clearInstanceListeners(markers[oldDocument._id]);\n          delete markers[oldDocument._id];\n          //Markers.remove({_id: oldDocument._id});\n        }\n      });\n    });\n  });\n\nMeteor.startup(function() {\n  GoogleMaps.load();\n});\n\nTemplate.map.helpers({\n  mapOptions: function() {\n    if (GoogleMaps.loaded()) {\n      return {\n        center: new google.maps.LatLng(50.2880701, 18.6778916),\n        zoom: 15\n      };\n    }\n  }\n});\nTemplate.addList.events({\n    'submit form': function(event){\n      event.preventDefault();\n      var listName = $('[name=listName]').val();\n      Lists.insert({\n          name: listName\n      });\n      $('[name=listName]').val('');\n    }\n});\n\nTemplate.lists.helpers({\n    'list': function(){\n        return Lists.find({}, {sort: {name: 1}});\n    }\n});\n\nTemplate.todos.helpers({\n    'todo': function(){\n        var currentList = this._id;\n        return Todos.find({ listId: currentList }, {sort: {createdAt: -1}})\n    }\n});\n\nTemplate.addTodo.events({\n    'submit form': function(event){\n    event.preventDefault();\n    var todoName = $('[name=\"todoName\"]').val();\n    var currentList = this._id;\n    Todos.insert({\n        name: todoName,\n        completed: false,\n        createdAt: new Date(),\n        listId: currentList\n    });\n    $('[name=\"todoName\"]').val('');\n}\n});\nTemplate.removemarker.events({\n  'click .remove-markers': function(event){\n    event.preventDefault();\n    var confirm = window.confirm(\"Delete this task?\");\n    if(confirm){\n\n        Markers.remove({_id: this });\n    }\n  }\n})\nTemplate.todoItem.events({\n    'click .delete-todo': function(event){\n    event.preventDefault();\n    var documentId = this._id;\n    var confirm = window.confirm(\"Delete this task?\");\n    if(confirm){\n        Todos.remove({ _id: documentId });\n    }\n},\n\t'keyup [name=todoItem]': function(event){\n    if(event.which == 13 || event.which == 27){\n        $(event.target).blur();\n    } else {\n        var documentId = this._id;\n        var todoItem = $(event.target).val();\n        Todos.update({ _id: documentId }, {$set: { name: todoItem }});\n    }\n},\n\t'change [type=checkbox]': function(){\n    var documentId = this._id;\n    var isCompleted = this.completed;\n    if(isCompleted){\n        Todos.update({ _id: documentId }, {$set: { completed: false }});\n        console.log(\"Task marked as incomplete.\");\n    } else {\n        Todos.update({ _id: documentId }, {$set: { completed: true }});\n        console.log(\"Task marked as complete.\");\n    }\n\t}\n\n});\n\nTemplate.todoItem.helpers({\n    'checked': function(){\n        var isCompleted = this.completed;\n        if(isCompleted){\n            return \"checked\";\n        } else {\n            return \"\";\n        }\n    }\n});\n\nTemplate.todosCount.helpers({\n    'totalTodos': function(){\n    \tvar currentList = this._id;\n        return Todos.find({ listId: currentList }).count();\n    },\n    'completedTodos': function(){\n    \tvar currentList = this._id;\n        return Todos.find({ listId: currentList, completed: true }).count();\n    }\n});\n\nTemplate.login.events({\n    'submit form': function(event){\n        event.preventDefault();\n        var username = $('[name=username]').val();\n        var password = $('[name=password]').val();\n        Meteor.loginWithPassword(username, password, function(error){\n        \tif(error){\n        \tconsole.log(error.reason);\n    \t\t} else {\n       \t\t Router.go(\"home\");\n   \t\t\t}\n        });\n    }\n});\n\nTemplate.register.events({\n    'submit form': function(event){\n        event.preventDefault();\n        var username = $('[name=username]').val();\n        var password = $('[name=password]').val();\n        Accounts.createUser({\n            username: username,\n            password: password\n        },  function(error){\n            if(error){\n        \tconsole.log(error.reason);\n   \t\t\t} else {\n        \tRouter.go(\"home\");\n    \t}\n\t\t});\n    }\n});\n\nTemplate.navigation.events({\n    'click .logout': function(event){\n        event.preventDefault();\n        Meteor.logout();\n        Router.go('login');\n    }\n\n});\n"]},"hash":"f91fd63a8edf582afa77caa4ef2f1b3682be719d"}
